<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous"> -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <title>SAKS</title>
</head>
<body>
  <div class="container border px-0 w-75 mt-4">
  <div class="bg-light col-form-label-lg pl-4">
    Register
</div>
   <div class="container py-4">
    <form class="col-lg-12 " id="registration-form" method="POST" >
      {% csrf_token %}
        <div class="form-group row ">
            <label for="validationCustom01" class="col-sm-4 col-form-label col-form-label-lg text-lg-right text-sm-left text-md-right ">Full Name</label>
            <div class="col-sm-6 "> 
              <input type="text" class="form-control form-control-lg"  name = "full_name" id="full-name">
              <div class="">
              </div>
            </div>
          
          </div>
          <div class="form-group row ">
            <label for="validationCustom02" class="col-sm-4 col-form-label col-form-label-lg text-lg-right text-sm-left text-md-right">E-mail Address</label>
            <div class="col-sm-6 ">
              <input type="email" class="form-control form-control-lg "  name = "email" id="email-address">
              <div class="">
              </div>
            </div>
          </div>
          <div class="form-group row">
            <label for="colFormLabelLg" class="col-sm-4 col-form-label col-form-label-lg text-lg-right text-sm-left text-md-right">User Name</label>
            <div class="col-sm-6">
              <input type="text" class="form-control form-control-lg"  name = "user_name" id="user-name">
              <div class="">
              </div>
            </div>
          </div>
          <div class="form-group row">
            <label for="colFormLabelLg" class="col-sm-4 col-form-label col-form-label-lg text-lg-right text-sm-left text-md-right">Phone Number</label>
            <div class="col-sm-6">
              <input type="text" class="form-control form-control-lg"  name = "phone_number" id="phone-number">
              <div class="">
              </div>
            </div>
          </div>
          <div class="form-group row">
            <label for="colFormLabelLg" class="col-sm-4 col-form-label col-form-label-lg text-lg-right text-sm-left text-md-right">Present Address</label>
            <div class="col-sm-6">
              <input type="text" class="form-control form-control-lg"  name = "present_address" id="present-address">
              <div class="">
              </div>
            </div>
          </div>
          <div class="form-group row">
            <label for="colFormLabelLg" class="col-sm-4 col-form-label col-form-label-lg text-lg-right text-sm-left text-md-right">Permanent Address</label>
            <div class="col-sm-6">
              <input type="text" class="form-control form-control-lg"  name = "permanent_address" id="permanent-address">
              <div class="">
              </div>
            </div>
          </div>
          <div class="form-group row">
            <label for="colFormLabelLg" class="col-sm-4 col-form-label col-form-label-lg text-lg-right text-sm-left text-md-right">NID Number</label>
            <div class="col-sm-6">
              <input type="text" class="form-control form-control-lg"  name = "nid_number" id="nid-number">
              <div class="">
              </div>
            </div>
          </div>
          <div class="form-group row">
            <div for="colFormLabelLg" class="col-sm-4 col-form-label col-form-label-lg"></div>
            <div class="col-sm-6">
              <button type="submit" class="btn btn-primary">Register</button>
            </div>
          </div>
        
      </form>
    </div>
  </div>
  <div>

    <!-- {% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %} -->

    {% if messages %}
  <script>
    {% for message in messages %}
        alert("{{ message }}");
    {% endfor %}
  </script>
{% endif %}
</div>
      <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
      <script>
       
//        {% if messages %}
// // <ul class="messages">
//           {% for message in messages %}
// //     <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
//               alert(message)
//           {% endfor %}
// // </ul>
//         {% endif %}


       (function () {


        var fullname = document.getElementById("full-name");
        var email = document.getElementById("email-address");
        var username = document.getElementById("user-name");
        var phonenumber = document.getElementById("phone-number");
        var presentaddress = document.getElementById("present-address");
        var permanentaddress = document.getElementById("permanent-address");
        var nidnumber = document.getElementById("nid-number");
          
          document.getElementById('registration-form').addEventListener('submit', function(evt){
            evt.preventDefault();
            var valid = true;
            
            if(checkemptyfields(fullname) | checkemptyfields(email) | checkemptyfields(username)|checkemptyfields(phonenumber)|
            checkemptyfields(presentaddress)|checkemptyfields(permanentaddress) | checkemptyfields(nidnumber)){
              valid = false;
            }

            
            if(!validateNid(nidnumber))
            valid = false;

            if(!validatePhoneNumber(phonenumber))
            valid = false;

            if (valid)
              document.getElementById('registration-form').submit();
          })
        })();
   
        //returns true if empty
        function checkemptyfields(element) {
          if (element.value.trim() == ""){
              // console.log("OK");
              msg = 'please fill out this field'
              element.classList.add('is-invalid');
              element.nextElementSibling.classList.add('invalid-feedback');
              element.nextElementSibling.innerHTML= msg;
              element.parentElement.classList.remove('was-validated')
              // fullname.nextSibling.innerHTML;(".nextSibling.innerHTML;")
              return true;
            }else{
              element.parentElement.classList.add('was-validated');
              element.nextElementSibling.classList.remove('invalid-feedback');
              element.nextElementSibling.classList.remove('valid-feedback');
              element.nextElementSibling.innerHTML= '';
              
            }
            return false;
        }

        //return true for valid nid
        function validateNid(element) {
          
              var nid = element.value.trim();
              
              msg = 'please enter valid nid eg:- 000000000V';
              nidregx = /^([0-9]{9}[x|X|v|V]|[0-9]{12})$/;

              if(element.value.trim() == "")
              return false;
              
              if(!nidregx.test(nid)){
              element.classList.add('is-invalid');
              element.nextElementSibling.classList.add('invalid-feedback');
              element.nextElementSibling.innerHTML= msg;
              element.parentElement.classList.remove('was-validated')
              // fullname.nextSibling.innerHTML;(".nextSibling.innerHTML;")
              return false;
            }
            return true;
        }

        function validatePhoneNumber(element){
          var phoneno = element.value.trim();
          var phonenoregx = /^\d{10}$/;

          msg = 'please enter valid phone number eg:-  0112667765';

          if(element.value.trim() == "")
              return false;

          if(!phonenoregx.test(phoneno)){
              element.classList.add('is-invalid');
              element.nextElementSibling.classList.add('invalid-feedback');
              element.nextElementSibling.innerHTML= msg;
              element.parentElement.classList.remove('was-validated')
              // fullname.nextSibling.innerHTML;(".nextSibling.innerHTML;")
              return false;
            }
            return true;
        }
      </script>
</body>
</html>